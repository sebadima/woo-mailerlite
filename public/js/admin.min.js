jQuery(document).ready(function(a){var c=a("#woocommerce_mailerlite_group");0!==c.length&&(c=c.next(".select2-container"),a('<span id="woo-ml-refresh-groups" class="woo-ml-icon-refresh" data-woo-ml-refresh-groups="true"></span>').insertAfter(c));var f=!1;a(document).on("click","[data-woo-ml-refresh-groups]",function(d){if(d.preventDefault(),!f){var b=a(this);b.removeClass("error");b.addClass("running");f=!0;jQuery.ajax({url:woo_ml_post.ajax_url,type:"post",data:{action:"post_woo_ml_refresh_groups"},
    success:function(e){0<=e.indexOf("success")&&b.removeClass("running");e?location.reload():b.addClass("error");f=!1}})}});a(document).on("click","[data-woo-ml-reset-orders-sync]",function(d){d.preventDefault();jQuery.ajax({url:woo_ml_post.ajax_url,type:"post",data:{action:"post_woo_ml_reset_orders_sync"},async:!1,success:function(b){window.location.reload()}})});var h=!1,k=a("#woo-ml-sync-untracked-orders-progress-bar");a(document).on("click","[data-woo-ml-sync-untracked-orders]",function(d){if(d.preventDefault(),
    !h){h=!0;console.log("Synchronize untracked orders");var b=a(this);orders_tracked=b.data("woo-ml-untracked-orders-count");all_untracked_orders_left=b.data("woo-ml-untracked-orders-left");b.data("woo-ml-untracked-orders-cycle");fail=a("#woo-ml-sync-untracked-orders-fail");success=a("#woo-ml-sync-untracked-orders-success");r=0;console.log("inside the loop!");jQuery.ajax({url:woo_ml_post.ajax_url,type:"post",beforeSend:function(){b.prop("disabled",!0);k.show();r++},data:{action:"post_woo_ml_sync_untracked_orders"},
    async:1,success:function(e){1==e?(console.log("done!"),console.log("Response: True"),b.hide(),k.hide(),fail.hide(),success.show()):(b.prop("disabled",0),e=all_untracked_orders_left-e,b.data("woo-ml-untracked-orders-count",e),b.data("woo-ml-untracked-orders-left",e),b.prop("value","Synchronize "+e+" remaining untracked orders."),fail.show())}})}});c=a("#woocommerce_mailerlite_api_key");a('<button id="woo-ml-validate-key" class="button-primary">Validate Key</button>').insertAfter(c);a(document).on("click",
    "#woo-ml-validate-key",function(d){(d.preventDefault(),f)||(d=a("#woocommerce_mailerlite_api_key").val(),jQuery.ajax({url:woo_ml_post.ajax_url,type:"post",data:{action:"post_woo_ml_validate_key",key:d},async:!1,success:function(b){location.reload()}}))});0<a("#woocommerce_mailerlite_group").length&&a("#woocommerce_mailerlite_group").select2();0<a("#woocommerce_mailerlite_ignore_product_list").length&&a("#woocommerce_mailerlite_ignore_product_list").select2();var g=a("#woocommerce_mailerlite_consumer_secret");
    0!==g.length&&g.next(".description").closest("tr").after('<h2>Integration Details</h2>                                    <p class="section-description">Customize MailerLite integration for WooCommerce</p>');a("#woocommerce_mailerlite_popups").closest("tr").before('<h2>Popups</h2>                                        <p class="section-description">Display pop-up subscribe forms created within MailerLite</p>');var l=a('[name="save"]');0!==c.length&&0===g.length?l.hide():l.show();c=a("#woocommerce_mailerlite_ignore_product_list");
    0!==c.length&&c.closest("tr").before('<h2>E-commerce Automations</h2>            <p class="section-description">Customize settings for your e-commerce automations created in MailerLite </p>')});